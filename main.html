<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>ğŸ¬Candy CrushğŸ¬</title>
    <style type="text/css">
        @font-face {
            font-family: 'CWDangamAsac-Bold';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2108@1.1/CWDangamAsac-Bold.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        body { background: #FF00B7; margin: 0;}
        .link:hover { cursor : url(cursor.png) 20 30, auto;}
        .candy { position: absolute; left: 0; top: 0; }
        #poetText { z-index: 9; position: absolute; left: 30px; top: 30px; font-size: 5rem; font-family: 'CWDangamAsac-Bold', serif; font-weight: 700; color: #ffffff; line-height: 5.5rem; text-align: left; }
        .word { opacity: 0; animation: zoomIn 0.8s forwards; }

        #timer { position: absolute; right: 30px; top: 30px; font-size: 1.4rem; color: #ffffff; }
        #score { position: absolute; right: 30px; top: 60px; font-size: 1.4rem; color: #ffffff; }

        @keyframes zoomIn {
            to { opacity: 1; }
        }
    </style>
</head>
<body>
    <div id="poetText"></div>
    <div id="timer"></div>
    <div id="score">Score: 0</div>
    <audio id="audio" src="crash.wav"></audio>

    <script type="text/javascript">
        var a = ["candy1", "candy2", "candy3", "candy4", "candy5", "candy6", "candy7", "candy8", "candy9", "candy10", "candy11", "candy12"];
        var images = [];
        var score = 0;

        function handleImageClick(event) {
            // íƒ€ì´ë¨¸ê°€ ì¢…ë£Œë˜ì—ˆì„ ë•Œë§Œ í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬
            if (secondsLeft > 0) {
                 event.target.style.display = "none";
                // event.target.src = "boom.gif";
                // event.target.animation = "fade 1s";
                // event.target.onanimationend = function(){
                //     this.remove();
                // }
                if (images.every(img => img.style.display === "none")) {
                    images.forEach(img => img.style.display = "block");
                }

                // í´ë¦­í•  ë•Œë§ˆë‹¤ ì ìˆ˜ ì¦ê°€
                score++;
                document.getElementById("score").textContent = "Score: " + score;
            }
        }

        for (var i = 0; i < 45; i++) {
            var t = document.createElement("img");
            t.src = a[randomBH(0, 11)] + ".png";
            t.className = "candy";
            t.style.width = randomBH(80, 400) + "px";
            t.style.height = "auto";
            t.style.left = Math.random() * screen.availWidth + "px";
            t.style.top = Math.random() * screen.availHeight + "px";

            t.addEventListener("click", handleImageClick);

            document.body.appendChild(t);
            images.push(t);
        }

        function randomBH(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        document.body.onclick = function play() {
            var audio = document.getElementById("audio");
            audio.play();
        }

        var poet = "Click Candies to Crush!";
        var poetArr = poet.split(" ");

        var myTimer = setInterval(print, 400);
        var s = 0;

        function print() {
            var t = document.createElement("span");
            t.innerHTML = poetArr[s] + " ";
            t.className = "word";
            s++;
            poetText.appendChild(t);
            if (s == poetArr.length) {
                clearInterval(myTimer);
            }
        }

        // íƒ€ì´ë¨¸ ì¶”ê°€
        var timerElement = document.getElementById("timer");
        var secondsLeft = 15;
        var timerInterval = setInterval(function() {
            timerElement.textContent = "Time: " + secondsLeft + " sec";
            secondsLeft--;
            if (secondsLeft < 0) {
                clearInterval(timerInterval);
                timerElement.textContent = "Game Over!";
                displayPopup(); // ì‹œê°„ ì¢…ë£Œ ì‹œ íŒì—… í‘œì‹œ

            }
        }, 1000);

        // ì´ë¯¸ì§€ íŒì—… í‘œì‹œ í•¨ìˆ˜
        function displayPopup() {
            var popup = document.createElement("div");
            popup.style.position = "fixed";
            popup.style.top = "50%";
            popup.style.left = "50%";
            popup.style.transform = "translate(-50%, -50%)";
            popup.style.backgroundColor = "white";
            popup.style.backgroundImage = "url('popbg.jpg')"; // ì´ë¯¸ì§€ íŒŒì¼ ê²½ë¡œë¥¼ ì—¬ê¸°ì— ì¶”ê°€
            popup.style.backgroundSize = "cover"; // ì´ë¯¸ì§€ë¥¼ ì°½ì— ë§ì¶”ê¸° ìœ„í•´ ì„¤ì •
            popup.style.border = "2px solid black";
            popup.style.width = "65%";
            popup.style.height = "65%";
            popup.style.padding = "20px";

        // í…ìŠ¤íŠ¸ë¥¼ ê°€ìš´ë° ì •ë ¬í•˜ëŠ” <div> ìš”ì†Œ ì¶”ê°€
            var textContainer = document.createElement("div");
            textContainer.style.textAlign = "center"; // ê°€ìš´ë° ì •ë ¬
            textContainer.style.margin = "90px auto 0";
            textContainer.style.width = "80%"; // í…ìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆì˜ ë„ˆë¹„ ì„¤ì •
            textContainer.style.position = "relative";
            textContainer.style.top = "50%";
            textContainer.style.transform = "translateY(-50%)";
            textContainer.style.color = "white";
            textContainer.style.fontSize = "1.3rem";
            textContainer.style.lineHeight = "2rem";

            // í…ìŠ¤íŠ¸ ë‚´ìš© ì¶”ê°€
            var scoreText = "ë‹¹ì‹ ì€ ì§€ê¸ˆ ì‚¬íƒ• " + score + "ê°œ, ì´ " + (score * 9) + "gì˜ ë‹¹ë¥˜ë¥¼ ì„­ì·¨í–ˆìŠµë‹ˆë‹¤.";
            textContainer.innerHTML = "<h3>" + scoreText + "</h3>" + "<p>ì¼ì¼ ë‹¹ë¥˜ ì„­ì·¨ ìƒí•œì„ ì€ 50gìœ¼ë¡œ , <br> ì´ë¥¼ ì´ˆê³¼í–ˆë‹¤ë©´ ë‹¨ë§› ì¤‘ë… ìê°€ì§„ë‹¨ê³¼ í•´ê²°ë°©ë²•ì„ ì•Œì•„ë³´ì„¸ìš”.</p>";

            // ë²„íŠ¼ ì¶”ê°€
            var nextButton = document.createElement("button");
            nextButton.textContent = "Go";
            nextButton.style.backgroundColor = "#FF00B7";
            nextButton.style.color = "white";
            nextButton.style.border = "none";
            nextButton.style.borderRadius = "40px";
            nextButton.style.padding = "30px 30px";
            nextButton.style.fontSize = "20px";
            nextButton.style.marginTop = "20px";
            nextButton.style.cursor = "pointer";
            // ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™í•˜ë„ë¡ ì„¤ì •
            nextButton.addEventListener("click", function() {
                window.location.href = "end.html"; 
            });

             textContainer.appendChild(nextButton);

            
            popup.appendChild(textContainer);
            document.body.appendChild(popup);
        }

    </script>
</body>
</html>